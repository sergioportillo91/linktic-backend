CREATE USER "MS_LINKTIC_CONFIG" IDENTIFIED BY "password";


GRANT CREATE TABLE TO "MS_LINKTIC_CONFIG";
 
GRANT CREATE SESSION TO "MS_LINKTIC_CONFIG";

ALTER USER MS_LINKTIC_CONFIG quota unlimited on USERS;


CREATE TABLE MS_LINKTIC_CONFIG.USUARIO (
    ID NUMBER(10) CONSTRAINT "CK_NULL_ID_USUARIO" NOT NULL ENABLE ,
    USER_NAME VARCHAR2(30) CONSTRAINT "CK_NULL_USER_NAME_USUARIO" NOT NULL ENABLE ,
    CONTRASEÃ‘A VARCHAR2(255) CONSTRAINT "CK_NULL_CONTRASENA_USUARIO" NOT NULL ENABLE ,
    ROL VARCHAR2(10) CONSTRAINT "CK_NULL_ROL_USUARIO" NOT NULL ENABLE
)

CREATE UNIQUE INDEX "MS_LINKTIC_CONFIG"."PK_USUARIO" ON "MS_LINKTIC_CONFIG"."USUARIO" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
  
  CREATE UNIQUE INDEX "MS_LINKTIC_CONFIG"."UK_USUARIO_USER_NAME" ON "MS_LINKTIC_CONFIG"."USUARIO" ("USER_NAME")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;

CREATE SEQUENCE MS_LINKTIC_CONFIG.SEQ_USER INCREMENT BY 1 MINVALUE 1 MAXVALUE 9999999999 NOCYCLE NOORDER;


CREATE TABLE MS_LINKTIC_CONFIG.SERVICE (
    ID NUMBER(10) CONSTRAINT "CK_NULL_ID_SERVICE" NOT NULL ENABLE,
    NAME VARCHAR2(30) CONSTRAINT "CK_NULL_NAME_SERVICE" NOT NULL,
    DESCRIPTION VARCHAR2(50) CONSTRAINT "CK_NULL_DESCRIPTION_SERVICE" NOT NULL,
    PRICE NUMBER(10, 2) CONSTRAINT "CK_NULL_PRICE_SERVICE" NOT NULL
);

CREATE UNIQUE INDEX "MS_LINKTIC_CONFIG"."PK_SERVICE" ON "MS_LINKTIC_CONFIG"."SERVICE" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;

CREATE SEQUENCE MS_LINKTIC_CONFIG.SEQ_SERVICE INCREMENT BY 1 MINVALUE 1 MAXVALUE 9999999999 NOCYCLE NOORDER;



CREATE TABLE MS_LINKTIC_CONFIG.CUSTOMER (
    ID NUMBER(10) CONSTRAINT CK_NULL_ID_CUSTOMER NOT NULL ENABLE,
    IDENTIFICATION VARCHAR2(20) CONSTRAINT CK_NULL_IDENTIFICATION_CUSTOMER NOT NULL ENABLE,
    FIRST_NAME VARCHAR2(30) CONSTRAINT CK_NULL_FIRST_NAME_CUSTOMER NOT NULL ENABLE,
    LAST_NAME VARCHAR2(30) CONSTRAINT CK_NULL_LAST_NAME_CUSTOMER NOT NULL ENABLE,
    EMAIL VARCHAR2(40) CONSTRAINT CK_NULL_EMAIL_CUSTOMER NOT NULL ENABLE,
    PHONE VARCHAR2(10) CONSTRAINT CK_NULL_PHONE_CUSTOMER NOT NULL ENABLE,
    USER_ID NUMBER(10) CONSTRAINT CK_NULL_USER_ID_CUSTOMER NOT NULL ENABLE
);

CREATE UNIQUE INDEX "MS_LINKTIC_CONFIG"."PK_CUSTOMER" ON "MS_LINKTIC_CONFIG"."CUSTOMER" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
  

CREATE SEQUENCE MS_LINKTIC_CONFIG.SEQ_CUSTOMER INCREMENT BY 1 MINVALUE 1 MAXVALUE 9999999999 NOCYCLE NOORDER;


CREATE TABLE MS_LINKTIC_CONFIG.RESERVATION (
    ID NUMBER(10) CONSTRAINT CK_NULL_ID_RESERVATION NOT NULL ENABLE,
    CUSTOMER_ID NUMBER(10) CONSTRAINT CK_NULL_CUSTOMER_ID_RESERVATION NOT NULL ENABLE,
    SERVICE_ID NUMBER(10) CONSTRAINT CK_NULL_SERVICE_ID_RESERVATION NOT NULL ENABLE,
    RESERVATION_DATE DATE,
    STAR_DATE DATE,
    END_DATE DATE,
    STATE VARCHAR2(15) CONSTRAINT CK_NULL_STATE_RESERVATION NOT NULL ENABLE
);

CREATE UNIQUE INDEX "MS_LINKTIC_CONFIG"."PK_RESERVATION" ON "MS_LINKTIC_CONFIG"."RESERVATION" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;

CREATE SEQUENCE MS_LINKTIC_CONFIG.SEQ_RESERVATION INCREMENT BY 1 MINVALUE 1 MAXVALUE 9999999999 NOCYCLE NOORDER;

ALTER TABLE MS_LINKTIC_CONFIG.USUARIO   ADD (CONSTRAINT PK_USUARIO PRIMARY KEY (ID) USING INDEX MS_LINKTIC_CONFIG.PK_USUARIO ENABLE VALIDATE);

ALTER TABLE MS_LINKTIC_CONFIG.CUSTOMER   ADD (CONSTRAINT PK_CUSTOMER PRIMARY KEY (ID) USING INDEX MS_LINKTIC_CONFIG.PK_CUSTOMER ENABLE VALIDATE);

ALTER TABLE MS_LINKTIC_CONFIG.SERVICE   ADD (CONSTRAINT PK_SERVICE PRIMARY KEY (ID) USING INDEX MS_LINKTIC_CONFIG.PK_SERVICE ENABLE VALIDATE);

ALTER TABLE MS_LINKTIC_CONFIG.RESERVATION  ADD (CONSTRAINT PK_RESERVATION PRIMARY KEY (ID) USING INDEX MS_LINKTIC_CONFIG.PK_RESERVATION ENABLE VALIDATE);


ALTER TABLE MS_LINKTIC_CONFIG.RESERVATION ADD CONSTRAINT FK_CUSTOMER_USER FOREIGN KEY (USER_ID) REFERENCES MS_LINKTIC_CONFIG.USUARIO(ID);

ALTER TABLE MS_LINKTIC_CONFIG.RESERVATION ADD CONSTRAINT FK_RESERVATION_CUSTOMER FOREIGN KEY (CUSTOMER_ID) REFERENCES MS_LINKTIC_CONFIG.CUSTOMER(ID);

ALTER TABLE MS_LINKTIC_CONFIG.RESERVATION ADD CONSTRAINT FK_RESERVATION_SERVICE FOREIGN KEY (SERVICE_ID) REFERENCES MS_LINKTIC_CONFIG.SERVICE(ID);